/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks
package update_person_returning

import adventureworks.customtypes.TypoLocalDateTime
import java.lang.Throwable
import zio.jdbc.SqlInterpolator
import zio.jdbc.ZConnection
import zio.stream.ZStream

object UpdatePersonReturningSqlRepoImpl extends UpdatePersonReturningSqlRepo {
  override def apply(suffix: /* nullability unknown */ Option[String], cutoff: /* nullability unknown */ Option[TypoLocalDateTime]): ZStream[ZConnection, Throwable, UpdatePersonReturningSqlRow] = {
    val sql =
      sql"""with row as (
              update person.person
              set firstname = firstname || '-' || ???
              where modifieddate < ???::timestamp
              returning firstname, modifieddate
            )
            select row."firstname", row."modifieddate"::text
            from row"""
    sql.query(???).selectStream
  }
}
