/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks
package pg_catalog
package pg_stat_progress_vacuum

import java.sql.ResultSet
import zio.jdbc.JdbcDecoder
import zio.json.JsonDecoder
import zio.json.JsonEncoder
import zio.json.ast.Json
import zio.json.internal.Write

case class PgStatProgressVacuumViewRow(
  pid: /* nullability unknown */ Option[Int],
  datid: /* nullability unknown */ Option[/* oid */ Long],
  /** Points to [[pg_database.PgDatabaseRow.datname]] */
  datname: Option[String],
  relid: /* nullability unknown */ Option[/* oid */ Long],
  phase: /* nullability unknown */ Option[String],
  heapBlksTotal: /* nullability unknown */ Option[Long],
  heapBlksScanned: /* nullability unknown */ Option[Long],
  heapBlksVacuumed: /* nullability unknown */ Option[Long],
  indexVacuumCount: /* nullability unknown */ Option[Long],
  maxDeadTuples: /* nullability unknown */ Option[Long],
  numDeadTuples: /* nullability unknown */ Option[Long]
)

object PgStatProgressVacuumViewRow {
  implicit lazy val jdbcDecoder: JdbcDecoder[PgStatProgressVacuumViewRow] = new JdbcDecoder[PgStatProgressVacuumViewRow] {
    override def unsafeDecode(columIndex: Int, rs: ResultSet): (Int, PgStatProgressVacuumViewRow) =
      columIndex + 10 ->
        PgStatProgressVacuumViewRow(
          pid = JdbcDecoder.optionDecoder(JdbcDecoder.intDecoder).unsafeDecode(columIndex + 0, rs)._2,
          datid = JdbcDecoder.optionDecoder(JdbcDecoder.longDecoder).unsafeDecode(columIndex + 1, rs)._2,
          datname = JdbcDecoder.optionDecoder(JdbcDecoder.stringDecoder).unsafeDecode(columIndex + 2, rs)._2,
          relid = JdbcDecoder.optionDecoder(JdbcDecoder.longDecoder).unsafeDecode(columIndex + 3, rs)._2,
          phase = JdbcDecoder.optionDecoder(JdbcDecoder.stringDecoder).unsafeDecode(columIndex + 4, rs)._2,
          heapBlksTotal = JdbcDecoder.optionDecoder(JdbcDecoder.longDecoder).unsafeDecode(columIndex + 5, rs)._2,
          heapBlksScanned = JdbcDecoder.optionDecoder(JdbcDecoder.longDecoder).unsafeDecode(columIndex + 6, rs)._2,
          heapBlksVacuumed = JdbcDecoder.optionDecoder(JdbcDecoder.longDecoder).unsafeDecode(columIndex + 7, rs)._2,
          indexVacuumCount = JdbcDecoder.optionDecoder(JdbcDecoder.longDecoder).unsafeDecode(columIndex + 8, rs)._2,
          maxDeadTuples = JdbcDecoder.optionDecoder(JdbcDecoder.longDecoder).unsafeDecode(columIndex + 9, rs)._2,
          numDeadTuples = JdbcDecoder.optionDecoder(JdbcDecoder.longDecoder).unsafeDecode(columIndex + 10, rs)._2
        )
  }
  implicit lazy val jsonDecoder: JsonDecoder[PgStatProgressVacuumViewRow] = JsonDecoder[Json.Obj].mapOrFail { jsonObj =>
    val pid = jsonObj.get("pid").fold[Either[String, Option[Int]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.int)))
    val datid = jsonObj.get("datid").fold[Either[String, Option[Long]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.long)))
    val datname = jsonObj.get("datname").fold[Either[String, Option[String]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.string)))
    val relid = jsonObj.get("relid").fold[Either[String, Option[Long]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.long)))
    val phase = jsonObj.get("phase").fold[Either[String, Option[String]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.string)))
    val heapBlksTotal = jsonObj.get("heap_blks_total").fold[Either[String, Option[Long]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.long)))
    val heapBlksScanned = jsonObj.get("heap_blks_scanned").fold[Either[String, Option[Long]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.long)))
    val heapBlksVacuumed = jsonObj.get("heap_blks_vacuumed").fold[Either[String, Option[Long]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.long)))
    val indexVacuumCount = jsonObj.get("index_vacuum_count").fold[Either[String, Option[Long]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.long)))
    val maxDeadTuples = jsonObj.get("max_dead_tuples").fold[Either[String, Option[Long]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.long)))
    val numDeadTuples = jsonObj.get("num_dead_tuples").fold[Either[String, Option[Long]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.long)))
    if (pid.isRight && datid.isRight && datname.isRight && relid.isRight && phase.isRight && heapBlksTotal.isRight && heapBlksScanned.isRight && heapBlksVacuumed.isRight && indexVacuumCount.isRight && maxDeadTuples.isRight && numDeadTuples.isRight)
      Right(PgStatProgressVacuumViewRow(pid = pid.toOption.get, datid = datid.toOption.get, datname = datname.toOption.get, relid = relid.toOption.get, phase = phase.toOption.get, heapBlksTotal = heapBlksTotal.toOption.get, heapBlksScanned = heapBlksScanned.toOption.get, heapBlksVacuumed = heapBlksVacuumed.toOption.get, indexVacuumCount = indexVacuumCount.toOption.get, maxDeadTuples = maxDeadTuples.toOption.get, numDeadTuples = numDeadTuples.toOption.get))
    else Left(List[Either[String, Any]](pid, datid, datname, relid, phase, heapBlksTotal, heapBlksScanned, heapBlksVacuumed, indexVacuumCount, maxDeadTuples, numDeadTuples).flatMap(_.left.toOption).mkString(", "))
  }
  implicit lazy val jsonEncoder: JsonEncoder[PgStatProgressVacuumViewRow] = new JsonEncoder[PgStatProgressVacuumViewRow] {
    override def unsafeEncode(a: PgStatProgressVacuumViewRow, indent: Option[Int], out: Write): Unit = {
      out.write("{")
      out.write(""""pid":""")
      JsonEncoder.option(JsonEncoder.int).unsafeEncode(a.pid, indent, out)
      out.write(",")
      out.write(""""datid":""")
      JsonEncoder.option(JsonEncoder.long).unsafeEncode(a.datid, indent, out)
      out.write(",")
      out.write(""""datname":""")
      JsonEncoder.option(JsonEncoder.string).unsafeEncode(a.datname, indent, out)
      out.write(",")
      out.write(""""relid":""")
      JsonEncoder.option(JsonEncoder.long).unsafeEncode(a.relid, indent, out)
      out.write(",")
      out.write(""""phase":""")
      JsonEncoder.option(JsonEncoder.string).unsafeEncode(a.phase, indent, out)
      out.write(",")
      out.write(""""heap_blks_total":""")
      JsonEncoder.option(JsonEncoder.long).unsafeEncode(a.heapBlksTotal, indent, out)
      out.write(",")
      out.write(""""heap_blks_scanned":""")
      JsonEncoder.option(JsonEncoder.long).unsafeEncode(a.heapBlksScanned, indent, out)
      out.write(",")
      out.write(""""heap_blks_vacuumed":""")
      JsonEncoder.option(JsonEncoder.long).unsafeEncode(a.heapBlksVacuumed, indent, out)
      out.write(",")
      out.write(""""index_vacuum_count":""")
      JsonEncoder.option(JsonEncoder.long).unsafeEncode(a.indexVacuumCount, indent, out)
      out.write(",")
      out.write(""""max_dead_tuples":""")
      JsonEncoder.option(JsonEncoder.long).unsafeEncode(a.maxDeadTuples, indent, out)
      out.write(",")
      out.write(""""num_dead_tuples":""")
      JsonEncoder.option(JsonEncoder.long).unsafeEncode(a.numDeadTuples, indent, out)
      out.write("}")
    }
  }
}
