/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks
package pg_catalog
package pg_user

import adventureworks.customtypes.TypoInstant
import adventureworks.pg_catalog.pg_authid.PgAuthidId
import java.sql.ResultSet
import zio.jdbc.JdbcDecoder
import zio.json.JsonDecoder
import zio.json.JsonEncoder
import zio.json.ast.Json
import zio.json.internal.Write

case class PgUserViewRow(
  /** Points to [[pg_shadow.PgShadowViewRow.usename]] */
  usename: Option[String],
  /** Points to [[pg_shadow.PgShadowViewRow.usesysid]] */
  usesysid: Option[PgAuthidId],
  /** Points to [[pg_shadow.PgShadowViewRow.usecreatedb]] */
  usecreatedb: Option[Boolean],
  /** Points to [[pg_shadow.PgShadowViewRow.usesuper]] */
  usesuper: Option[Boolean],
  /** Points to [[pg_shadow.PgShadowViewRow.userepl]] */
  userepl: Option[Boolean],
  /** Points to [[pg_shadow.PgShadowViewRow.usebypassrls]] */
  usebypassrls: Option[Boolean],
  passwd: /* nullability unknown */ Option[String],
  /** Points to [[pg_shadow.PgShadowViewRow.valuntil]] */
  valuntil: Option[TypoInstant],
  /** Points to [[pg_shadow.PgShadowViewRow.useconfig]] */
  useconfig: Option[Array[String]]
)

object PgUserViewRow {
  implicit lazy val jdbcDecoder: JdbcDecoder[PgUserViewRow] = new JdbcDecoder[PgUserViewRow] {
    override def unsafeDecode(columIndex: Int, rs: ResultSet): (Int, PgUserViewRow) =
      columIndex + 8 ->
        PgUserViewRow(
          usename = JdbcDecoder.optionDecoder(JdbcDecoder.stringDecoder).unsafeDecode(columIndex + 0, rs)._2,
          usesysid = JdbcDecoder.optionDecoder(PgAuthidId.jdbcDecoder).unsafeDecode(columIndex + 1, rs)._2,
          usecreatedb = JdbcDecoder.optionDecoder(JdbcDecoder.booleanDecoder).unsafeDecode(columIndex + 2, rs)._2,
          usesuper = JdbcDecoder.optionDecoder(JdbcDecoder.booleanDecoder).unsafeDecode(columIndex + 3, rs)._2,
          userepl = JdbcDecoder.optionDecoder(JdbcDecoder.booleanDecoder).unsafeDecode(columIndex + 4, rs)._2,
          usebypassrls = JdbcDecoder.optionDecoder(JdbcDecoder.booleanDecoder).unsafeDecode(columIndex + 5, rs)._2,
          passwd = JdbcDecoder.optionDecoder(JdbcDecoder.stringDecoder).unsafeDecode(columIndex + 6, rs)._2,
          valuntil = JdbcDecoder.optionDecoder(TypoInstant.jdbcDecoder).unsafeDecode(columIndex + 7, rs)._2,
          useconfig = JdbcDecoder.optionDecoder(adventureworks.StringArrayDecoder).unsafeDecode(columIndex + 8, rs)._2
        )
  }
  implicit lazy val jsonDecoder: JsonDecoder[PgUserViewRow] = JsonDecoder[Json.Obj].mapOrFail { jsonObj =>
    val usename = jsonObj.get("usename").fold[Either[String, Option[String]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.string)))
    val usesysid = jsonObj.get("usesysid").fold[Either[String, Option[PgAuthidId]]](Right(None))(_.as(JsonDecoder.option(PgAuthidId.jsonDecoder)))
    val usecreatedb = jsonObj.get("usecreatedb").fold[Either[String, Option[Boolean]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.boolean)))
    val usesuper = jsonObj.get("usesuper").fold[Either[String, Option[Boolean]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.boolean)))
    val userepl = jsonObj.get("userepl").fold[Either[String, Option[Boolean]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.boolean)))
    val usebypassrls = jsonObj.get("usebypassrls").fold[Either[String, Option[Boolean]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.boolean)))
    val passwd = jsonObj.get("passwd").fold[Either[String, Option[String]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.string)))
    val valuntil = jsonObj.get("valuntil").fold[Either[String, Option[TypoInstant]]](Right(None))(_.as(JsonDecoder.option(TypoInstant.jsonDecoder)))
    val useconfig = jsonObj.get("useconfig").fold[Either[String, Option[Array[String]]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.array[String](JsonDecoder.string, implicitly))))
    if (usename.isRight && usesysid.isRight && usecreatedb.isRight && usesuper.isRight && userepl.isRight && usebypassrls.isRight && passwd.isRight && valuntil.isRight && useconfig.isRight)
      Right(PgUserViewRow(usename = usename.toOption.get, usesysid = usesysid.toOption.get, usecreatedb = usecreatedb.toOption.get, usesuper = usesuper.toOption.get, userepl = userepl.toOption.get, usebypassrls = usebypassrls.toOption.get, passwd = passwd.toOption.get, valuntil = valuntil.toOption.get, useconfig = useconfig.toOption.get))
    else Left(List[Either[String, Any]](usename, usesysid, usecreatedb, usesuper, userepl, usebypassrls, passwd, valuntil, useconfig).flatMap(_.left.toOption).mkString(", "))
  }
  implicit lazy val jsonEncoder: JsonEncoder[PgUserViewRow] = new JsonEncoder[PgUserViewRow] {
    override def unsafeEncode(a: PgUserViewRow, indent: Option[Int], out: Write): Unit = {
      out.write("{")
      out.write(""""usename":""")
      JsonEncoder.option(JsonEncoder.string).unsafeEncode(a.usename, indent, out)
      out.write(",")
      out.write(""""usesysid":""")
      JsonEncoder.option(PgAuthidId.jsonEncoder).unsafeEncode(a.usesysid, indent, out)
      out.write(",")
      out.write(""""usecreatedb":""")
      JsonEncoder.option(JsonEncoder.boolean).unsafeEncode(a.usecreatedb, indent, out)
      out.write(",")
      out.write(""""usesuper":""")
      JsonEncoder.option(JsonEncoder.boolean).unsafeEncode(a.usesuper, indent, out)
      out.write(",")
      out.write(""""userepl":""")
      JsonEncoder.option(JsonEncoder.boolean).unsafeEncode(a.userepl, indent, out)
      out.write(",")
      out.write(""""usebypassrls":""")
      JsonEncoder.option(JsonEncoder.boolean).unsafeEncode(a.usebypassrls, indent, out)
      out.write(",")
      out.write(""""passwd":""")
      JsonEncoder.option(JsonEncoder.string).unsafeEncode(a.passwd, indent, out)
      out.write(",")
      out.write(""""valuntil":""")
      JsonEncoder.option(TypoInstant.jsonEncoder).unsafeEncode(a.valuntil, indent, out)
      out.write(",")
      out.write(""""useconfig":""")
      JsonEncoder.option(JsonEncoder.array[String](JsonEncoder.string, implicitly)).unsafeEncode(a.useconfig, indent, out)
      out.write("}")
    }
  }
}
