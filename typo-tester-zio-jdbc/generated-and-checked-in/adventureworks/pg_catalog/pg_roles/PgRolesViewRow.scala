/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks
package pg_catalog
package pg_roles

import adventureworks.customtypes.TypoInstant
import adventureworks.pg_catalog.pg_authid.PgAuthidId
import java.sql.ResultSet
import zio.jdbc.JdbcDecoder
import zio.json.JsonDecoder
import zio.json.JsonEncoder
import zio.json.ast.Json
import zio.json.internal.Write

case class PgRolesViewRow(
  /** Points to [[pg_authid.PgAuthidRow.rolname]] */
  rolname: String,
  /** Points to [[pg_authid.PgAuthidRow.rolsuper]] */
  rolsuper: Boolean,
  /** Points to [[pg_authid.PgAuthidRow.rolinherit]] */
  rolinherit: Boolean,
  /** Points to [[pg_authid.PgAuthidRow.rolcreaterole]] */
  rolcreaterole: Boolean,
  /** Points to [[pg_authid.PgAuthidRow.rolcreatedb]] */
  rolcreatedb: Boolean,
  /** Points to [[pg_authid.PgAuthidRow.rolcanlogin]] */
  rolcanlogin: Boolean,
  /** Points to [[pg_authid.PgAuthidRow.rolreplication]] */
  rolreplication: Boolean,
  /** Points to [[pg_authid.PgAuthidRow.rolconnlimit]] */
  rolconnlimit: Int,
  rolpassword: /* nullability unknown */ Option[String],
  /** Points to [[pg_authid.PgAuthidRow.rolvaliduntil]] */
  rolvaliduntil: Option[TypoInstant],
  /** Points to [[pg_authid.PgAuthidRow.rolbypassrls]] */
  rolbypassrls: Boolean,
  /** Points to [[pg_db_role_setting.PgDbRoleSettingRow.setconfig]] */
  rolconfig: Option[Array[String]],
  /** Points to [[pg_authid.PgAuthidRow.oid]] */
  oid: PgAuthidId
)

object PgRolesViewRow {
  implicit lazy val jdbcDecoder: JdbcDecoder[PgRolesViewRow] = new JdbcDecoder[PgRolesViewRow] {
    override def unsafeDecode(columIndex: Int, rs: ResultSet): (Int, PgRolesViewRow) =
      columIndex + 12 ->
        PgRolesViewRow(
          rolname = JdbcDecoder.stringDecoder.unsafeDecode(columIndex + 0, rs)._2,
          rolsuper = JdbcDecoder.booleanDecoder.unsafeDecode(columIndex + 1, rs)._2,
          rolinherit = JdbcDecoder.booleanDecoder.unsafeDecode(columIndex + 2, rs)._2,
          rolcreaterole = JdbcDecoder.booleanDecoder.unsafeDecode(columIndex + 3, rs)._2,
          rolcreatedb = JdbcDecoder.booleanDecoder.unsafeDecode(columIndex + 4, rs)._2,
          rolcanlogin = JdbcDecoder.booleanDecoder.unsafeDecode(columIndex + 5, rs)._2,
          rolreplication = JdbcDecoder.booleanDecoder.unsafeDecode(columIndex + 6, rs)._2,
          rolconnlimit = JdbcDecoder.intDecoder.unsafeDecode(columIndex + 7, rs)._2,
          rolpassword = JdbcDecoder.optionDecoder(JdbcDecoder.stringDecoder).unsafeDecode(columIndex + 8, rs)._2,
          rolvaliduntil = JdbcDecoder.optionDecoder(TypoInstant.jdbcDecoder).unsafeDecode(columIndex + 9, rs)._2,
          rolbypassrls = JdbcDecoder.booleanDecoder.unsafeDecode(columIndex + 10, rs)._2,
          rolconfig = JdbcDecoder.optionDecoder(adventureworks.StringArrayDecoder).unsafeDecode(columIndex + 11, rs)._2,
          oid = PgAuthidId.jdbcDecoder.unsafeDecode(columIndex + 12, rs)._2
        )
  }
  implicit lazy val jsonDecoder: JsonDecoder[PgRolesViewRow] = JsonDecoder[Json.Obj].mapOrFail { jsonObj =>
    val rolname = jsonObj.get("rolname").toRight("Missing field 'rolname'").flatMap(_.as(JsonDecoder.string))
    val rolsuper = jsonObj.get("rolsuper").toRight("Missing field 'rolsuper'").flatMap(_.as(JsonDecoder.boolean))
    val rolinherit = jsonObj.get("rolinherit").toRight("Missing field 'rolinherit'").flatMap(_.as(JsonDecoder.boolean))
    val rolcreaterole = jsonObj.get("rolcreaterole").toRight("Missing field 'rolcreaterole'").flatMap(_.as(JsonDecoder.boolean))
    val rolcreatedb = jsonObj.get("rolcreatedb").toRight("Missing field 'rolcreatedb'").flatMap(_.as(JsonDecoder.boolean))
    val rolcanlogin = jsonObj.get("rolcanlogin").toRight("Missing field 'rolcanlogin'").flatMap(_.as(JsonDecoder.boolean))
    val rolreplication = jsonObj.get("rolreplication").toRight("Missing field 'rolreplication'").flatMap(_.as(JsonDecoder.boolean))
    val rolconnlimit = jsonObj.get("rolconnlimit").toRight("Missing field 'rolconnlimit'").flatMap(_.as(JsonDecoder.int))
    val rolpassword = jsonObj.get("rolpassword").fold[Either[String, Option[String]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.string)))
    val rolvaliduntil = jsonObj.get("rolvaliduntil").fold[Either[String, Option[TypoInstant]]](Right(None))(_.as(JsonDecoder.option(TypoInstant.jsonDecoder)))
    val rolbypassrls = jsonObj.get("rolbypassrls").toRight("Missing field 'rolbypassrls'").flatMap(_.as(JsonDecoder.boolean))
    val rolconfig = jsonObj.get("rolconfig").fold[Either[String, Option[Array[String]]]](Right(None))(_.as(JsonDecoder.option(JsonDecoder.array[String](JsonDecoder.string, implicitly))))
    val oid = jsonObj.get("oid").toRight("Missing field 'oid'").flatMap(_.as(PgAuthidId.jsonDecoder))
    if (rolname.isRight && rolsuper.isRight && rolinherit.isRight && rolcreaterole.isRight && rolcreatedb.isRight && rolcanlogin.isRight && rolreplication.isRight && rolconnlimit.isRight && rolpassword.isRight && rolvaliduntil.isRight && rolbypassrls.isRight && rolconfig.isRight && oid.isRight)
      Right(PgRolesViewRow(rolname = rolname.toOption.get, rolsuper = rolsuper.toOption.get, rolinherit = rolinherit.toOption.get, rolcreaterole = rolcreaterole.toOption.get, rolcreatedb = rolcreatedb.toOption.get, rolcanlogin = rolcanlogin.toOption.get, rolreplication = rolreplication.toOption.get, rolconnlimit = rolconnlimit.toOption.get, rolpassword = rolpassword.toOption.get, rolvaliduntil = rolvaliduntil.toOption.get, rolbypassrls = rolbypassrls.toOption.get, rolconfig = rolconfig.toOption.get, oid = oid.toOption.get))
    else Left(List[Either[String, Any]](rolname, rolsuper, rolinherit, rolcreaterole, rolcreatedb, rolcanlogin, rolreplication, rolconnlimit, rolpassword, rolvaliduntil, rolbypassrls, rolconfig, oid).flatMap(_.left.toOption).mkString(", "))
  }
  implicit lazy val jsonEncoder: JsonEncoder[PgRolesViewRow] = new JsonEncoder[PgRolesViewRow] {
    override def unsafeEncode(a: PgRolesViewRow, indent: Option[Int], out: Write): Unit = {
      out.write("{")
      out.write(""""rolname":""")
      JsonEncoder.string.unsafeEncode(a.rolname, indent, out)
      out.write(",")
      out.write(""""rolsuper":""")
      JsonEncoder.boolean.unsafeEncode(a.rolsuper, indent, out)
      out.write(",")
      out.write(""""rolinherit":""")
      JsonEncoder.boolean.unsafeEncode(a.rolinherit, indent, out)
      out.write(",")
      out.write(""""rolcreaterole":""")
      JsonEncoder.boolean.unsafeEncode(a.rolcreaterole, indent, out)
      out.write(",")
      out.write(""""rolcreatedb":""")
      JsonEncoder.boolean.unsafeEncode(a.rolcreatedb, indent, out)
      out.write(",")
      out.write(""""rolcanlogin":""")
      JsonEncoder.boolean.unsafeEncode(a.rolcanlogin, indent, out)
      out.write(",")
      out.write(""""rolreplication":""")
      JsonEncoder.boolean.unsafeEncode(a.rolreplication, indent, out)
      out.write(",")
      out.write(""""rolconnlimit":""")
      JsonEncoder.int.unsafeEncode(a.rolconnlimit, indent, out)
      out.write(",")
      out.write(""""rolpassword":""")
      JsonEncoder.option(JsonEncoder.string).unsafeEncode(a.rolpassword, indent, out)
      out.write(",")
      out.write(""""rolvaliduntil":""")
      JsonEncoder.option(TypoInstant.jsonEncoder).unsafeEncode(a.rolvaliduntil, indent, out)
      out.write(",")
      out.write(""""rolbypassrls":""")
      JsonEncoder.boolean.unsafeEncode(a.rolbypassrls, indent, out)
      out.write(",")
      out.write(""""rolconfig":""")
      JsonEncoder.option(JsonEncoder.array[String](JsonEncoder.string, implicitly)).unsafeEncode(a.rolconfig, indent, out)
      out.write(",")
      out.write(""""oid":""")
      PgAuthidId.jsonEncoder.unsafeEncode(a.oid, indent, out)
      out.write("}")
    }
  }
}
