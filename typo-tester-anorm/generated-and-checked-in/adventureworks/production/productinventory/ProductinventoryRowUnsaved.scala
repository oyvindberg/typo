/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.productinventory;

import adventureworks.Text;
import adventureworks.customtypes.Defaulted;
import adventureworks.customtypes.TypoLocalDateTime;
import adventureworks.customtypes.TypoShort;
import adventureworks.customtypes.TypoUUID;
import adventureworks.production.location.LocationId;
import adventureworks.production.product.ProductId;
import play.api.libs.json.JsObject;
import play.api.libs.json.JsResult;
import play.api.libs.json.JsValue;
import play.api.libs.json.OWrites;
import play.api.libs.json.Reads;
import play.api.libs.json.Writes;
import scala.collection.immutable.ListMap;
import scala.util.Try;

/** This class corresponds to a row in table `production.productinventory` which has not been persisted yet */
case class ProductinventoryRowUnsaved(
  /** Product identification number. Foreign key to Product.ProductID.
    * Points to [[adventureworks.production.product.ProductRow.productid]]
    */
  productid: ProductId,
  /** Inventory location identification number. Foreign key to Location.LocationID.
    * Points to [[adventureworks.production.location.LocationRow.locationid]]
    */
  locationid: LocationId,
  /** Storage compartment within an inventory location. */
  shelf: /* max 10 chars */ String,
  /** Storage container on a shelf in an inventory location.
    * Constraint CK_ProductInventory_Bin affecting columns bin:  (((bin >= 0) AND (bin <= 100)))
    */
  bin: TypoShort,
  /** Default: 0
    * Quantity of products in the inventory location.
    */
  quantity: Defaulted[TypoShort] = Defaulted.UseDefault(),
  /** Default: uuid_generate_v1() */
  rowguid: Defaulted[TypoUUID] = Defaulted.UseDefault(),
  /** Default: now() */
  modifieddate: Defaulted[TypoLocalDateTime] = Defaulted.UseDefault()
) {
  def toRow(quantityDefault: => TypoShort, rowguidDefault: => TypoUUID, modifieddateDefault: => TypoLocalDateTime): ProductinventoryRow = {
    new ProductinventoryRow(
      productid = productid,
      locationid = locationid,
      shelf = shelf,
      bin = bin,
      quantity = quantity.getOrElse(quantityDefault),
      rowguid = rowguid.getOrElse(rowguidDefault),
      modifieddate = modifieddate.getOrElse(modifieddateDefault)
    )
  }
}

object ProductinventoryRowUnsaved {
  implicit lazy val reads: Reads[ProductinventoryRowUnsaved] = {
    Reads[ProductinventoryRowUnsaved](json => JsResult.fromTry(
        Try(
          ProductinventoryRowUnsaved(
            productid = json.\("productid").as(ProductId.reads),
            locationid = json.\("locationid").as(LocationId.reads),
            shelf = json.\("shelf").as(Reads.StringReads),
            bin = json.\("bin").as(TypoShort.reads),
            quantity = json.\("quantity").as(Defaulted.reads(TypoShort.reads)),
            rowguid = json.\("rowguid").as(Defaulted.reads(TypoUUID.reads)),
            modifieddate = json.\("modifieddate").as(Defaulted.reads(TypoLocalDateTime.reads))
          )
        )
      ),
    )
  }
  implicit lazy val text: Text[ProductinventoryRowUnsaved] = {
    Text.instance[ProductinventoryRowUnsaved]{ (row, sb) =>
      ProductId.text.unsafeEncode(row.productid, sb)
      sb.append(Text.DELIMETER)
      LocationId.text.unsafeEncode(row.locationid, sb)
      sb.append(Text.DELIMETER)
      Text.stringInstance.unsafeEncode(row.shelf, sb)
      sb.append(Text.DELIMETER)
      TypoShort.text.unsafeEncode(row.bin, sb)
      sb.append(Text.DELIMETER)
      Defaulted.text(TypoShort.text).unsafeEncode(row.quantity, sb)
      sb.append(Text.DELIMETER)
      Defaulted.text(TypoUUID.text).unsafeEncode(row.rowguid, sb)
      sb.append(Text.DELIMETER)
      Defaulted.text(TypoLocalDateTime.text).unsafeEncode(row.modifieddate, sb)
    }
  }
  implicit lazy val writes: OWrites[ProductinventoryRowUnsaved] = {
    OWrites[ProductinventoryRowUnsaved](o =>
      new JsObject(ListMap[String, JsValue](
        "productid" -> ProductId.writes.writes(o.productid),
        "locationid" -> LocationId.writes.writes(o.locationid),
        "shelf" -> Writes.StringWrites.writes(o.shelf),
        "bin" -> TypoShort.writes.writes(o.bin),
        "quantity" -> Defaulted.writes(TypoShort.writes).writes(o.quantity),
        "rowguid" -> Defaulted.writes(TypoUUID.writes).writes(o.rowguid),
        "modifieddate" -> Defaulted.writes(TypoLocalDateTime.writes).writes(o.modifieddate)
      ))
    )
  }
}