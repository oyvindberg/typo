/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks
package frontpage
package order_item

import adventureworks.customtypes.TypoLocalDateTime
import adventureworks.frontpage.order.OrderFields
import adventureworks.frontpage.order.OrderId
import adventureworks.frontpage.order.OrderRow
import adventureworks.frontpage.product.ProductFields
import adventureworks.frontpage.product.ProductId
import adventureworks.frontpage.product.ProductRow
import typo.dsl.ForeignKey
import typo.dsl.Path
import typo.dsl.SqlExpr.Field
import typo.dsl.SqlExpr.FieldLikeNoHkt
import typo.dsl.SqlExpr.IdField
import typo.dsl.SqlExpr.OptField
import typo.dsl.Structure.Relation

trait OrderItemFields {
  def id: IdField[OrderItemId, OrderItemRow]
  def orderId: OptField[OrderId, OrderItemRow]
  def productId: OptField[ProductId, OrderItemRow]
  def quantity: Field[Int, OrderItemRow]
  def price: Field[BigDecimal, OrderItemRow]
  def shippedAt: OptField[TypoLocalDateTime, OrderItemRow]
  def fkOrder: ForeignKey[OrderFields, OrderRow] =
    ForeignKey[OrderFields, OrderRow]("frontpage.order_item_order_id_fkey", Nil)
      .withColumnPair(orderId, _.id)
  def fkProduct: ForeignKey[ProductFields, ProductRow] =
    ForeignKey[ProductFields, ProductRow]("frontpage.order_item_product_id_fkey", Nil)
      .withColumnPair(productId, _.id)
}

object OrderItemFields {
  lazy val structure: Relation[OrderItemFields, OrderItemRow] =
    new Impl(Nil)
    
  private final class Impl(val _path: List[Path])
    extends Relation[OrderItemFields, OrderItemRow] {
  
    override lazy val fields: OrderItemFields = new OrderItemFields {
      override def id = IdField[OrderItemId, OrderItemRow](_path, "id", None, Some("uuid"), x => x.id, (row, value) => row.copy(id = value))
      override def orderId = OptField[OrderId, OrderItemRow](_path, "order_id", None, Some("uuid"), x => x.orderId, (row, value) => row.copy(orderId = value))
      override def productId = OptField[ProductId, OrderItemRow](_path, "product_id", None, Some("uuid"), x => x.productId, (row, value) => row.copy(productId = value))
      override def quantity = Field[Int, OrderItemRow](_path, "quantity", None, Some("int4"), x => x.quantity, (row, value) => row.copy(quantity = value))
      override def price = Field[BigDecimal, OrderItemRow](_path, "price", None, Some("numeric"), x => x.price, (row, value) => row.copy(price = value))
      override def shippedAt = OptField[TypoLocalDateTime, OrderItemRow](_path, "shipped_at", Some("text"), Some("timestamp"), x => x.shippedAt, (row, value) => row.copy(shippedAt = value))
    }
  
    override lazy val columns: List[FieldLikeNoHkt[?, OrderItemRow]] =
      List[FieldLikeNoHkt[?, OrderItemRow]](fields.id, fields.orderId, fields.productId, fields.quantity, fields.price, fields.shippedAt)
  
    override def copy(path: List[Path]): Impl =
      new Impl(path)
  }
  
}
