/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks
package frontpage
package order

import adventureworks.customtypes.TypoLocalDateTime
import adventureworks.frontpage.product.ProductFields
import adventureworks.frontpage.product.ProductId
import adventureworks.frontpage.product.ProductRow
import adventureworks.frontpage.user.UserFields
import adventureworks.frontpage.user.UserId
import adventureworks.frontpage.user.UserRow
import typo.dsl.ForeignKey
import typo.dsl.Path
import typo.dsl.SqlExpr.Field
import typo.dsl.SqlExpr.FieldLikeNoHkt
import typo.dsl.SqlExpr.IdField
import typo.dsl.SqlExpr.OptField
import typo.dsl.Structure.Relation

trait OrderFields {
  def id: IdField[OrderId, OrderRow]
  def userId: OptField[UserId, OrderRow]
  def productId: OptField[ProductId, OrderRow]
  def status: OptField[OrderStatus, OrderRow]
  def total: Field[BigDecimal, OrderRow]
  def createdAt: OptField[TypoLocalDateTime, OrderRow]
  def shippedAt: OptField[TypoLocalDateTime, OrderRow]
  def fkProduct: ForeignKey[ProductFields, ProductRow] =
    ForeignKey[ProductFields, ProductRow]("frontpage.order_product_id_fkey", Nil)
      .withColumnPair(productId, _.id)
  def fkUser: ForeignKey[UserFields, UserRow] =
    ForeignKey[UserFields, UserRow]("frontpage.order_user_id_fkey", Nil)
      .withColumnPair(userId, _.id)
}

object OrderFields {
  lazy val structure: Relation[OrderFields, OrderRow] =
    new Impl(Nil)
    
  private final class Impl(val _path: List[Path])
    extends Relation[OrderFields, OrderRow] {
  
    override lazy val fields: OrderFields = new OrderFields {
      override def id = IdField[OrderId, OrderRow](_path, "id", None, Some("uuid"), x => x.id, (row, value) => row.copy(id = value))
      override def userId = OptField[UserId, OrderRow](_path, "user_id", None, Some("uuid"), x => x.userId, (row, value) => row.copy(userId = value))
      override def productId = OptField[ProductId, OrderRow](_path, "product_id", None, Some("uuid"), x => x.productId, (row, value) => row.copy(productId = value))
      override def status = OptField[OrderStatus, OrderRow](_path, "status", None, Some("frontpage.order_status"), x => x.status, (row, value) => row.copy(status = value))
      override def total = Field[BigDecimal, OrderRow](_path, "total", None, Some("numeric"), x => x.total, (row, value) => row.copy(total = value))
      override def createdAt = OptField[TypoLocalDateTime, OrderRow](_path, "created_at", Some("text"), Some("timestamp"), x => x.createdAt, (row, value) => row.copy(createdAt = value))
      override def shippedAt = OptField[TypoLocalDateTime, OrderRow](_path, "shipped_at", Some("text"), Some("timestamp"), x => x.shippedAt, (row, value) => row.copy(shippedAt = value))
    }
  
    override lazy val columns: List[FieldLikeNoHkt[?, OrderRow]] =
      List[FieldLikeNoHkt[?, OrderRow]](fields.id, fields.userId, fields.productId, fields.status, fields.total, fields.createdAt, fields.shippedAt)
  
    override def copy(path: List[Path]): Impl =
      new Impl(path)
  }
  
}
